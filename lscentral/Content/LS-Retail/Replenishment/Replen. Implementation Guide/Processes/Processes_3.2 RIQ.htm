<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" /><title>RIQ and Journals calculation</title>
        <link rel="shortcut icon" href="/Content/Resources/Images/favicon.ico" />
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../../Resources/Stylesheets/LSNav.css" rel="stylesheet" />
        <script src="../../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js" defer="defer">
        </script>
        <script src="../../../../Resources/Javascripts/Scroll-Button.js" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-dropdown" style="display:none;" id="#centralSmallScreen"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../../home.html" title="LS Central Help" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                    <div class="central-dropdown" style="display:none;" id="#centralTop"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="central-dropdown" style="display:none;"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <MadCap:conditionalText data-mc-conditions="Default.GoogleAnalytics">
                                        <script>/* <![CDATA[ */
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			
				ga('create', 'UA-58791693-4', 'auto');
			
				var file = document.location.href; 
				file = file.substring(0, (file.indexOf("#") == -1) ? file.length : file.indexOf("#"));
				file = file.substring(0, (file.indexOf("?") == -1) ? file.length : file.indexOf("?"));
				file = file.substring(file.lastIndexOf("/") + 1, file.length);
 
				if (file === 'Search.htm') 
				{
					var newPath = document.location.pathname + document.location.search + document.location.hash;
					newPath = newPath.replace(/#/, '?');
					newPath = newPath.replace(/search\-/, 'q=');
					ga('set', 'page', newPath);
				
					function locationHashChanged()
					{
						newPath = document.location.pathname + document.location.search + document.location.hash;
						newPath = newPath.replace(/#/, '?');
						newPath = newPath.replace(/search\-/, 'q=');
						ga('set', 'page', newPath);
						ga('send', 'pageview');
					}
				
					if(window.HashChangeEvent)
					{
						window.onhashchange = locationHashChanged;
					}
				}
				ga('send', 'pageview');
			/* ]]> */</script>
                                    </MadCap:conditionalText>
                                    <p>&#160;</p>
                                    <div role="main" id="mc-main-content">
                                        <map id="map8" name="map8">
                                            <area shape="rectangle" coords="752,8,865,77" dragDirection="0" href="../Overview.htm" />
                                        </map>
                                        <map id="map11" name="map11">
                                            <area shape="rectangle" coords="404,8,512,72" dragDirection="0" href="Processes.htm" />
                                        </map>
                                        <map id="map14" name="map14">
                                            <area shape="rectangle" coords="215,6,331,74" dragDirection="0" href="Processes_3 Automatic.htm" />
                                        </map>
                                        <p>
                                            <img src="../../../../Resources/Images/LS Retail/Replenishment/Replenishment Implementation Guide/Flow_1_A5.png" usemap="#map8" />
                                            <br />
                                            <img src="../../../../Resources/Images/LS Retail/Replenishment/Replenishment Implementation Guide/Flow_5.1_A3.png" usemap="#map11" />
                                            <br />
                                            <img src="../../../../Resources/Images/LS Retail/Replenishment/Replenishment Implementation Guide/Flow_5.3.1_A2.png" usemap="#map14" />
                                        </p>
                                        <p>&#160;</p>
                                        <h2><a name="aanchor7818"></a>
                                            <MadCap:concept term="Retail" />RIQ and Journals calculation</h2>
                                        <p>Automatic Replenishment covers all steps from calculating Out-of-Stock, current inventory and demand, journals, and thresholds until finally creating the Purchase Orders, Transfer Orders, or Sales Orders. </p>
                                        <p>The Replenishment Item Quantity (RIQ) and Replenishment Journal calculation reuses pre-calculated Out-of-Stock occurrences and calculates the proposals for purchases and transfers.  <br />This is done in two separate steps:<ul><li value="1">Replenishment Item Quantity calculation</li><li value="2">Replenishment Journal calculation </li></ul></p>
                                        <p><b>Replenishment Item Quantity calculation</b>
                                            <br />The Replenishment Item Quantity (RIQ) table is used to store a snapshot of the current stock situation of the items in the stores and warehouses. This table is usually calculated once per day in a nightly run Scheduler Job and is the basis for the calculation of the Replenishment Journals. The RIQ can be calculated with parallel processes to reduce calculation time. <br />If the Out-of-Stock days should be considered in the Replenishment Item Quantity calculation, the Out-of-Stock table needs to be calculated upfront.</p>
                                        <p><b>Replenishment Journal calculation</b>
                                            <br />Replenishment Journals are used to calculate the Purchase Order and Transfer Order proposals for Replenishment based on the current stock situation and the demand in the stores. The calculation of the journals depends on the Replenishment Item Quantity table, which needs to be calculated upfront. </p>
                                        <p>Each Journal has a Template and a Batch:</p>
                                        <ul>
                                            <li value="1">The Template defines <b>what </b>should be calculated in the Journal and it provides filters for items, stores, vendors, and more. </li>
                                            <li value="2">The Batch defines <b>when </b>the Journal should be calculated. </li>
                                        </ul>
                                        <p>Refer to the topics <a href="../../Automatic-Replenishment/Templates-And-Journals/Replenishment-Template.htm" class="MCXref xref">Replenishment Templates</a> and <a href="../../Automatic-Replenishment/Templates-And-Journals/Replenishment-Batch.htm" class="MCXref xref">Replenishment Batch</a>for a more detailed description of the fields in these tables.</p>
                                        <h3>Goal</h3>
                                        <p>The goals of this step:</p>
                                        <ul>
                                            <li value="1">Get an understanding how to set up RIQ calculation and Journals</li>
                                            <li value="2">Set up the processes for the calculation in LS Central</li>
                                        </ul>
                                        <h3>Key questions / considerations</h3>
                                        <p>Replenishment Item Quantity</p>
                                        <ul>
                                            <li value="1">Is Automatic Replenishment used for one or more items?</li>
                                            <li value="2">Should RIQ be pre-calculated during the night or calculated on the fly when  manually calculating journals?</li>
                                        </ul>
                                        <p>Replenishment Journals</p>
                                        <ul>
                                            <li value="1">Is Automatic Replenishment used for one or more items?</li>
                                            <li value="2">Should Journals be pre-calculated during the night or calculated manually by the user?</li>
                                            <li value="3">How shall Replenishment Journals be grouped?<br /><ul><li value="1">Vendors</li><li value="2">Product Groups</li><li value="3">Stores</li></ul><p>(see <a href="../Item Flow/Item Flow.htm">Item Flow</a> for details on how the Item Flow defines the Replenishment Journal setup).</p></li>
                                            <li value="4">Which fields should be visible in Journals?<ul><li value="1">Quantity fields</li><li value="2">Sales amount fields</li><li value="3">Cost amount fields</li><li value="4">Profit amount fields</li></ul></li>
                                        </ul>
                                        <p>Setup</p>
                                        <ul>
                                            <li value="1">When should Scheduler jobs for calculation be run?</li>
                                            <li value="2">How many SKUs (item, variant, and location combinations) need to be calculated?<ul><li value="1">If this is exceeding 1 mio. SKUs<br></br>or calculation time is too long:<ul><li value="1">Activate query-based processing for RIQ calculation</li><li value="2">Activate parallel processing for RIQ calculation.</li></ul></li></ul></li>
                                        </ul>
                                        <h3><span class="GeneralLSCentral_Mini">LS&#160;Central</span> setup considerations</h3>
                                        <h4>Replenishment Item Quantity calculation</h4>
                                        <p>The Replenishment Item Quantity can be calculated manually or via a Scheduler Job - it is best practice to run this in a nightly job. <br />For information on how to run the calculation see <a href="../../Automatic-Replenishment/Process/Calculation-Of-Replenishment.htm">Calculation of the Replenishment Item Quantity table</a>.</p>
                                        <p>The Replenishment Item Quantity needs to be calculated before the Journals are calculated.</p>
                                        <h4>Replenishment Journals</h4>
                                        <p>In the Replenishment Journals it is possible to set up which fields are visible in the Journal lines. <br />This is used when sensitive information (like cost prices) should not be shown to specific users or user groups. </p>
                                        <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../../../Resources/Images/LS Retail/Replenishment/Replenishment Implementation Guide/Process_Journals 1.png"><img class="MCPopupThumbnail img" data-mc-width="903" data-mc-height="588" src="../../../../Resources/Images/LS Retail/Replenishment/Replenishment Implementation Guide/Process_Journals 1_thumb_0_100.png" style="mc-thumbnail: popup;mc-thumbnail-max-height: 100px;" tabindex="" /></a>
                                            <br /><span style="font-size: 8pt;">(Click to enlarge)</span>
                                            <br />
                                        </p>
                                        <p>Select or clear the relevant check boxes on the <b>Replenishment Template</b> page, FastTab <b>Visible Fields</b>.</p>
                                        <h4>Replenishment Journal calculation</h4>
                                        <p>The Replenishment Journals can be calculated manually or via a Scheduler Job - it is best practice to run this in a nightly job. If a Journal needs to be recalculated during the day this can be done manually from the Replen. Journal page.</p>
                                        <p>For information on how to run the calculation manually see <a href="../../Automatic-Replenishment/Templates-And-Journals/Replenishment-Journals.htm">Replenishment Journals</a>. <br />To calculate the Journal with the Scheduler a Replen. Journal Batch needs to be set up. For information on how to set up Journal Batches see <a href="../../Automatic-Replenishment/Templates-And-Journals/Replenishment-Batch.htm">Replenishment Batch</a>.</p>
                                        <h4>Scheduler Jobs</h4>
                                        <p>The Scheduler Jobs for Replenishment need to run in a specific order:</p>
                                        <ol>
                                            <li value="1">Out-of-Stock calculation (if applicable) <br />Job REPLEN-STKOUT in the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> demo database</li>
                                            <li value="2">Replenishment Item Quantity<br />Job REPLEN-QTY in the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> demo database</li>
                                            <li value="3">Replenishment Journals <br />Job REPLEN-RUN in the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> demo database.</li>
                                        </ol>
                                        <h4>Performance tuning</h4>
                                        <p>The calculation time of the RIQ and Journals calculation are directly dependent on the number of items, variants, and locations to be calculated. Calculation times of one hour or more are not unusual and during calculation no other Scheduler jobs or database maintenance should occur at the same time. If the calculation takes too long, calculation performance can be improved.</p>
                                        <p>Calculation performance of the RIQ table can be improved in two ways:</p>
                                        <ul>
                                            <li value="1">Query based processing</li>
                                            <li value="2">Parallel processing</li>
                                        </ul>
                                        <p>Both options can be used together, if needed. </p>
                                        <p><b>Query based processing:</b>
                                            <br />This can be enabled in the <b>Replen. Setup</b> page by selecting  the <b>Replenishment Item Quantity - Enable Query  </b>check box. When this is enabled, the calculation will make use of <span class="GeneralBC_Mini">Business Central</span> query objects and temporary tables. This will consume more physical RAM memory on the service tier than the standard calculation approach but will reduce calculation time.</p>
                                        <p><b>Parallel processing:</b>
                                            <br />The calculation can be split between multiple service tiers where each service tier will only calculate a part of the entire item scope. The service tiers can be run on the same VM or server. <br />For more details on how to setup the parallel calculation approach see <a href="../../../../Resources/Documents for download/Older Documentation/Replenishment Calculation using Multiple NAS LS Nav 2017 (10.06) Memo.pdf">Replenishment Calculation using Multiple NAS LS Nav 2017 (10.06) Memo.pdf</a></p>
                                        <p style="font-weight: bold;">Go back to:</p>
                                        <p style="font-weight: normal;"><a href="Processes_3 Automatic.htm">Automatic Replenishment</a>
                                        </p>
                                        <p style="font-weight: bold;"><a href="#" style="font-weight: normal;">Processes</a>
                                        </p>
                                        <p><a href="../Overview.htm">Overview</a>
                                        </p>
                                        <p>&#160;</p>
                                        <p>&#160;</p>
                                    </div>
                                    <div id="footer" class="ls-nav-footer">
                                        <hr width="100%" size="0" align="center" />
                                        <p>Â© <span class="VariablesCurrentYear">2021</span> LS Retail ehf. All rights reserved.  </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>