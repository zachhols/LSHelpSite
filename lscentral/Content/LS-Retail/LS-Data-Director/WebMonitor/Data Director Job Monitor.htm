<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Retail|LS Data Director|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon-16x16.png" /><title>Job Monitor Collection</title>
        <link rel="shortcut icon" href="/Content/Resources/Images/favicon.ico" />
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/LSNav.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" defer="defer">
        </script>
        <script src="../../../Resources/Javascripts/Scroll-Button.js" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-dropdown" style="display:none;" id="#centralSmallScreen"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../home.html" title="LS Central Help" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                    <div class="central-dropdown" style="display:none;" id="#centralTop"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="central-dropdown" style="display:none;"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <MadCap:conditionalText data-mc-conditions="Default.GoogleAnalytics">
                                        <script>/* <![CDATA[ */
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			
				ga('create', 'UA-58791693-4', 'auto');
			
				var file = document.location.href; 
				file = file.substring(0, (file.indexOf("#") == -1) ? file.length : file.indexOf("#"));
				file = file.substring(0, (file.indexOf("?") == -1) ? file.length : file.indexOf("?"));
				file = file.substring(file.lastIndexOf("/") + 1, file.length);
 
				if (file === 'Search.htm') 
				{
					var newPath = document.location.pathname + document.location.search + document.location.hash;
					newPath = newPath.replace(/#/, '?');
					newPath = newPath.replace(/search\-/, 'q=');
					ga('set', 'page', newPath);
				
					function locationHashChanged()
					{
						newPath = document.location.pathname + document.location.search + document.location.hash;
						newPath = newPath.replace(/#/, '?');
						newPath = newPath.replace(/search\-/, 'q=');
						ga('set', 'page', newPath);
						ga('send', 'pageview');
					}
				
					if(window.HashChangeEvent)
					{
						window.onhashchange = locationHashChanged;
					}
				}
				ga('send', 'pageview');
			/* ]]> */</script>
                                    </MadCap:conditionalText>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>&#160;</p>
                                    <div role="main" id="mc-main-content">
                                        <h1><a name="aanchor14477"></a>
                                            <MadCap:concept term="Retail" />Job Monitor Collection</h1>
                                        <p>When the Data Director has finished processing a job, it moves the job header XML file, with all the information about the job to the<b> Archive</b> folder, located in the <b>DD Data</b> folder.</p>
                                        <p>
                                            <img src="../../../Resources/Images/LS Data Director QuickGuides/WebMonitor/Data Director Job Monitor_500x440.png" style="width: 500;height: 440;" />
                                        </p>
                                        <p>This data can be converted into Monitor Data Jobs named <b>DDArchiveJob</b> and <b>DDStatusWorkJob</b> that are sent to a central database for reporting or to feed web-monitoring services that run off these database tables.</p>
                                        <p>Nav tables are available in LS Retail NAV 6.3 and later:</p>
                                        <p>
                                            <img src="../../../Resources/Images/LS Data Director QuickGuides/WebMonitor/Monitoring Collection_450x52.png" style="width: 450;height: 52;" class="images" />
                                        </p>
                                        <p>SQL tables are available in LS One Site Manager (Store Controller):</p>
                                        <p>
                                            <img src="../../../Resources/Images/LS Data Director QuickGuides/WebMonitor/Data Director Job Monitor.jpg" class="images" />
                                        </p>
                                        <p>The Monitor Data Jobs insert data to the <b>DDMonitorHdr</b> and <b>DDMonitorLine</b> tables.</p>
                                        <ul>
                                            <li value="1"><b>DDMonitorHdr</b> includes the basic information about the job such as Pack/Job Id, Job status, and create time.</li>
                                        </ul>
                                        <ul>
                                            <li value="1"><b>DDMonitorLine</b> contains information from the source and destination hosts, such as host status, server messages, connection string, and last registration time. The index ID for the host is -1 for the source host (where the data was pulled from) and 0 and up for destination hosts (where data will be inserted).</li>
                                        </ul>
                                        <p>The Monitoring Collection setup is needed where the Source data will be pulled from and where Scheduler sends Jobs to, as the statues from the destination DD Hosts are always reported back to the Source Host. If the Scheduler at Head Office is pulling data from the stores with pull jobs, then the Monitor Collection is required at both the Head Office and store DDs. If the Head Office is only sending jobs to stores, then it is only required at the Head Office.</p>
                                        <ol>
                                            <li value="1">In the DD Configuration Tool, click the <b>Monitor Config</b> tab, and select the <b>Activate</b> check box:<p><img src="../../../Resources/Images/LS Data Director QuickGuides/WebMonitor/Data Director Job Monitor_1_400x320.jpg" style="width: 400;height: 320;" /></p></li>
                                            <li value="2">Type in the <b>DD Host</b> of the DD Service where you want to send the monitor data to and the database connection string of the central database in the <b>DB String</b> field where the monitor tables are located. You can copy the connection string from the <b>Distribution Location </b>card in <span class="GeneralLSCentral_Mini">LS&#160;Central</span>.<p><img src="../../../Resources/Images/LS Data Director QuickGuides/WebMonitor/Data Director Job Monitor_2_400x133.jpg" style="width: 400;height: 133;" /></p></li>
                                            <li value="3">If the Monitor data job needs to be routed via another DD Host, type the routing path in the DD Host.<p><b>Example:</b> If POS is running DD and jobs need to be routed via Store Server, then type STORE;HQSRV into the <b>DD Host</b> field and the Job will be routed from POS via the Store server to Head Quarters.</p></li>
                                            <li value="4">Click the <b>Plugins</b> button to select what data should be included:<p><img src="../../../Resources/Images/LS Data Director QuickGuides/WebMonitor/Data Director Job Monitor_3_250x235.jpg" style="width: 250;height: 235;" /></p><p>DD has three default plugins:</p><ul><li value="1"><b>Archive Data Collector</b> takes the data from the Archive folder. These are all processed jobs with the status <i>Done</i>.</li><li value="2"><b>Work Data Collector</b> gets the job data from the DD Router's memory. These are all jobs still in processing, waiting for processing or jobs with error.</li><li value="3"><b>Result Data Collector</b>  takes result data from Manual Replication and updates the Monitor data with the results.</li></ul></li>
                                            <li value="5">Select the plugin you want to run, and type in the <b>Interval </b>how often you want to send data for the plugin. Other plugins can be created that would collect some other information like OS status or Database Server data.<p>There are xxx <b>Pre</b>DataCollector versions of the three default plugins that come with Data Director 3.2.112 and later. These plugins work the same as the three default ones, except they are to be used with <span class="GeneralLSCentral_Mini">LS&#160;Central</span> version 17.5 and later where table names have LSC prefix added.</p></li>
                                            <li value="6">Click the <b>Add Dest</b> button to add this destination to the list. You can add as many destination databases as you want, and the Monitor data will be saved into each database you define here.</li>
                                            <li value="7">To remove a destination, click the destination in the list, and the click the <b>Del Dest</b> button.</li>
                                        </ol>
                                        <p>You can also test the connection by clicking the <b>Test Conn</b> button. To be able to test the connection, the data for the destination needs to be in the edit fields. If you are testing a destination that is already in the list, double-click it and the data will be loaded into the edit fields.</p>
                                        <p><b>Note:</b> When done, remember to click the <b>Save Config </b>button to save the changes locally, or the <b>Send Config </b>button to send the configuration to Remote or running DD Host.</p>
                                        <p>If the setup is large, a lot of Stores and POSs and few DDs running at HO, it can be useful to set up two sets of Monitor Data Collection tables. This can be done by creating two different companies in the Database where Monitor Data should be inserted, and by sending HO DD Data to one company and Store DD Data to another. <br />By doing this, it is possible to match the data coming from Stores against data coming from HO as there could be a case where a Status Message was lost, and HO DD is waiting for update, while Store DD say the job is done, so the data coming in from both locations will not override each other as they would if both DDs would send to the same set of Tables.</p>
                                        <p><b>Note:</b> Data Director version 3.2.20 and later sets different status on jobs that are missing status update, instead of <i>Unknown</i> the job will get status <i>NoStatus</i>, which means that DD was not able to update the status for that destination, and to be able to get the final status you need to look at the Job Monitor at the destination DD. Having two sets of Tables for the Monitor Collection Data would help checking cases like this, where you find <i>NoStatus </i>in HO job data, and can look it up in Store job data to see the latest status.</p>
                                        <p>&#160;</p>
                                        <p data-mc-conditions="Default.NotPrint">&#160;</p>
                                    </div>
                                    <div id="footer" class="ls-nav-footer">
                                        <hr width="100%" size="0" align="center" />
                                        <p>© <span class="VariablesCurrentYear">2021</span> LS Retail ehf. All rights reserved.  </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>