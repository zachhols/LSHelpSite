<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Retail|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" /><title>LS Insight Azure Data Factory</title>
        <link rel="shortcut icon" href="/Content/Resources/Images/favicon.ico" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/LSNav.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" defer="defer">
        </script>
        <script src="../Resources/Javascripts/Scroll-Button.js" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-dropdown" style="display:none;" id="#centralSmallScreen"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../home.html" title="LS Central Help" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                    <div class="central-dropdown" style="display:none;" id="#centralTop"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="central-dropdown" style="display:none;"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <MadCap:conditionalText data-mc-conditions="Default.GoogleAnalytics">
                                        <script>/* <![CDATA[ */
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			
				ga('create', 'UA-58791693-4', 'auto');
			
				var file = document.location.href; 
				file = file.substring(0, (file.indexOf("#") == -1) ? file.length : file.indexOf("#"));
				file = file.substring(0, (file.indexOf("?") == -1) ? file.length : file.indexOf("?"));
				file = file.substring(file.lastIndexOf("/") + 1, file.length);
 
				if (file === 'Search.htm') 
				{
					var newPath = document.location.pathname + document.location.search + document.location.hash;
					newPath = newPath.replace(/#/, '?');
					newPath = newPath.replace(/search\-/, 'q=');
					ga('set', 'page', newPath);
				
					function locationHashChanged()
					{
						newPath = document.location.pathname + document.location.search + document.location.hash;
						newPath = newPath.replace(/#/, '?');
						newPath = newPath.replace(/search\-/, 'q=');
						ga('set', 'page', newPath);
						ga('send', 'pageview');
					}
				
					if(window.HashChangeEvent)
					{
						window.onhashchange = locationHashChanged;
					}
				}
				ga('send', 'pageview');
			/* ]]> */</script>
                                    </MadCap:conditionalText>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>&#160;</p>
                                    <div role="main" id="mc-main-content">
                                        <h1><a name="top"></a><a name="aanchor11006"></a>
                                            <MadCap:concept term="Retail" />LS Insight Azure Data Factory</h1>
                                        <p>The LS Insight setup process creates the LS Insight - Azure Data Factory (ADF). The ADF contains everything needed to populate the star schema dimensions and facts in the LS Insight - Data Warehouse. This topic describes all the different factory resources and how they are used.</p>
                                        <p class="shortcut"><a href="#Overview" class="MCXref xref">Overview</a>
                                        </p>
                                        <p class="shortcut"><a href="#Data" class="MCXref xref">Data Factory</a>
                                        </p>
                                        <p class="shortcut"><a href="#Author" class="MCXref xref">Author</a>
                                        </p>
                                        <p class="shortcut"><a href="#Monitor" class="MCXref xref">Monitor</a>
                                        </p>
                                        <p class="shortcut"><a href="#Manage" class="MCXref xref">Manage</a>
                                        </p>
                                        <p><b>Note:</b>&#160;This is a detailed description of the ADF&#160;components to give you a better understanding of what happens where. Everything about how to use the ADF when setting up LS Insight is explained in the <a href="Setup/Onboarding.htm">onboarding process</a>.</p>
                                        <h2><a name="Overview"></a>Overview</h2>
                                        <p>The components are:</p>
                                        <ul>
                                            <li value="1">Integration runtime gateway</li>
                                            <li value="2">Linked services</li>
                                            <li value="3">Pipelines</li>
                                        </ul>
                                        <p>To view these components in the Azure portal you need to open the LS Insight ADF from the resource list and then select <b>Author &amp; Monitor</b> from the overview page.</p>
                                        <p>
                                            <img src="../Resources/Images/LS Insight Help/ADFOverview_700x405.png" class="images" style="width: 700;height: 405;" />
                                        </p>
                                        <p>When you open the <b>Author &amp; Monitor</b> view, you will see a new tab in your browser and get access to the data factory menu that will be referenced many times in this ADF description. The menu consists of icons and labels that lead to the different sections.</p>
                                        <p>
                                            <img src="../Resources/Images/LS Insight Help/ADataFactory_700x543.png" class="images" style="width: 700;height: 543;" />
                                        </p>
                                        <h2><a name="Data"></a>Data Factory</h2>
                                        <p>This is just a generic section where you can access videos and knowledge about how to get started with ADF. Since the LS&#160;Insight ADF is created by the deployement script, you can just use this information if you want to explore the options of ADFs further.</p>
                                        <h2><a name="Author"></a>Author</h2>
                                        <p>The Author section is the heart of the ADF. In this section you have access to the pipelines that are an essential part of the LS Insight ETL. </p>
                                        <h3>Pipelines</h3>
                                        <p>The LS Insight pipelines are arranged in a folder structure by where in the process they are used. Some pipelines query the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> source database, while others move data between tables in the Data Warehouse by running stored procedures from the DW database. Other pipelines are created to control the order the pipelines are run in. Their only purpose is to execute other pipelines.</p>
                                        <p>
                                            <img src="../Resources/Images/LS Insight Help/pipelinefolders_300x231.png" class="images" style="width: 300;height: 231;" />
                                        </p>
                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />1 - LS Insight query setup</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>This folder contains three pipelines.</p>
                                                <h5>Add or Delete Companies</h5>
                                                <p>When this pipeline is triggered, you can add a company name to be added to or deleted from the Companies table. The<b> deleteCompanies</b> parameter decides whether the company is added or deleted. You can add more than one company at a time; you just need to separate the names by a comma in the <b>Companies </b>field.</p>
                                                <p><b>Example:</b>
                                                </p>
                                                <p>
                                                    <img src="../Resources/Images/LS Insight Help/Add&amp;DeleteCompanies_500x231.png" class="images" style="width: 500;height: 231;">
                                                    </img>
                                                </p>
                                                <p>This pipeline is not used, unless you want to trigger it manually to add a new company to your current LS Insight instance.</p>
                                                <h5>Add or Delete Source Tables</h5>
                                                <p>When this pipeline is triggered, you can add an <span class="GeneralLSCentral_Mini">LS&#160;Central</span> source table name to be added to or deleted from the <b>LSInsight$SourceTabels</b> table. The <b>deleteSourceTable </b>parameter decides whether the<b> Source table</b> name is added or deleted. You can add more than one source table at a time, you just need to separate them by a comma.</p>
                                                <h5><a name="Populate"></a>PopulateQueryBase</h5>
                                                <p>This pipeline has two parts that are by default run one after the other, but can be run separately, if needed.</p>
                                                <p>The first part is <b>Get Metadata</b>. Here a query is sent to the<span class="GeneralLSCentral_Mini">LS&#160;Central</span> source database to collect information about all tables and fields. </p>
                                                <p>This meta data is then used in the second stage <b>Populate Query Base</b> to create the staging queries for all tables listed in the <b>LSInsight$SourceTable</b> table and adding them to the <b>LSInsight$QUERYBASE</b> table.</p>
                                                <p>After the pipeline has run, the LSInsight$QUERYBASE has been populated with creation scripts for the staging tables, where the <span class="GeneralBC_Mini">Business Central</span> (BC) base table has been combined with all extension tables with the same name, into one LS Insight staging table.</p>
                                                <p>The query base also contains select queries used by the <b>All Staging Tables</b> pipeline to populate the staging tables.</p>
                                                <p>This pipeline is run once during the onboarding process and does not need to be run again, unless <span class="GeneralLSCentral_Mini">LS&#160;Central</span> is updated with new extensions that should be added to LS Insight, or if you want to add a new staging table to extend LS Insight beyond the standard version provided by LS Retail.</p>
                                                <p>The Extend LS Insight section of the LS Insight online help explains in further detail how to extend your LS Insight instance,  since the extension steps differ depending on which <span class="GeneralLSCentral_Mini">LS&#160;Central</span> platform you are running on. </p>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />2 - Staging Tables</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <h5><a name="All"></a>All Staging Tables</h5>
                                                <p>This pipeline is run as part of the <b>Scheduled Run</b> pipeline that should be scheduled to run every day. </p>
                                                <p>It starts by getting the first company from the <b>Companies </b>table, and then looping through all tables in <b>SourceTables</b>, creating the staging tables and populating them with data from the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> source.</p>
                                                <p>The same thing is then done for all additional companies, <span class="GeneralLSCentral_Mini">LS&#160;Central</span> is queried and the staging tables are populated with information from each company.</p>
                                                <p>The RowID of the last staging table is then stored in the<b> LS Insight Audit</b> table to ensure incremental load when applicable.</p>
                                                <p>This pipeline has a few parameters that can be used for testing. The default values are shown in the image:</p>
                                                <p>
                                                    <img src="../Resources/Images/LS Insight Help/AllStagingParams_500x178.png" class="images" style="width: 500;height: 178;" />
                                                </p>
                                                <ul>
                                                    <li value="1">
                                                        <p><b>TableToLoad</b> - Here you can add the name of one or more tables that should be loaded. Here you do not provide the table names separated by comma, but instead supply the string used for a "like" comparison on the table name. So if you were to add something like '<i>%Item%</i>' to the parameter field, the pipeline would run for all tables that contained the word '<i>Item</i>'. </p>
                                                    </li>
                                                    <li value="2">
                                                        <p><b>CompanyToLoad</b> - This parameters works exactly the same as the <b>TableToLoad</b>, except that it filters companies, not tables.</p>
                                                    </li>
                                                    <li value="3">
                                                        <p><b>FullLoadthreshold</b> - The full load threshold determines how many rows a table can have before doing an incremental load instead of a full load of the table from source to staging. This is because the incremental load always has some cost, so it is not worth doing an incremental load for tables with relatively few rows. You only want to do incremental load on tables with many rows and where many rows are being added each day, like the transaction and entry tables. </p>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />3 - Dimension Tables</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>The <b>Dimension</b> folder contains two pipelines. These pipeline are run as part of the Scheduled Run pipeline that should be scheduled to run every day. </p>
                                                <h5><a name="Execute"></a>Execute Dimension Stored Procedures</h5>
                                                <p>This pipeline starts by populating the <b>dCompany</b> dimension table. It then runs through all the stored procedures in the LS Insight DW database that start with <b>dim</b>. Those stored procedures (SP) usually combine several staging tables to create the dimension table and add and update data as needed.</p>
                                                <p>Dimensions that are part of <span class="GeneralLSCentral_Mini">LS&#160;Central</span> extensions, such as <span class="GeneralLSCentral_Mini">LS&#160;Central</span> for Hotels, are also run by this pipeline. So if the tables exist in <span class="GeneralLSCentral_Mini">LS&#160;Central</span>, the staging tables are created by the previous step and the dimensions are loaded by this pipeline along with the other dimensions the extension SPs are prefixed with <b>dimext</b>.</p>
                                                <p>You can find all the stored procedures in the LS Insight database under <b>Programmability</b> - <b>Stored Procedures</b>.</p>
                                                <p>The pipeline runs the dimension SPs in parallel as much as possible.</p>
                                                <h5><a name="PL-SP-od"></a>PL-SP-odMemberAttributes</h5>
                                                <p>This pipeline runs the stored procedure for the <b>odMemberAttributes</b> dimension. This is an out trigger dimensions and must be run after other dimension tables have been updated, because it combines data from staging tables and the <b>dMember </b>dimension.</p>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />4 - Fact Tables</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>There are five fact table pipelines that run five fact table stored procedures. They are run one by one, because there are so few and we want to control the order they are run in. These pipelines are run as part of the <b>Scheduled Run </b>pipeline that should be scheduled to run every day. </p>
                                                <h5><a name="PL-SP-fa3"></a>PL-SP-factDiscount</h5>
                                                <h5><a name="PL-SP-fa4"></a>PL-SP-factInventory</h5>
                                                <h5><a name="PL-SP-Fa"></a>PL-SP-FactSalesPosted</h5>
                                                <h5><a name="PL-SP-po"></a>PL-SP-postfactUpdateAdjustedCost</h5>
                                                <h5><a name="PL-SP-pr"></a>PL-SP-prefactItemCostAdjustments</h5>
                                                <p>&#160;</p>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />4.e - Extension Fact Tables</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>Currently, there are only two extension fact table pipelines and both of them are for the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> Hotels extension. This is currently the only available extension for LS Insight, but more are coming. </p>
                                                <p>If the Hotel source tables are enabled in the <b>LSInsight$Sourcetables</b> table and the extension and tables exist in the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> database, the data will be automatically loaded into the LS&#160;Insight data warehouse so no special setup is needed. All the tables and stored procedures for Hotels already exist in the Data Warehouse template.</p>
                                                <h5><a name="PL-SP-fa"></a>PL-SP-factHotelDetailedRevenue</h5>
                                                <h5><a name="PL-SP-fa2"></a>PL-SP-factHotelStatistic</h5>
                                                <p>&#160;</p>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />5 - Pipeline Run Diagrams</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>This folder contains the pipeline that should be run to run all the other pipelines listed above. Most of these pipelines should never be run individually, but we categorized them into folders and explain them here, so you are familiar with the processes and able to extend, if needed. </p>
                                                <h5>Generate LS Insight Query Base</h5>
                                                <p>This pipeline executes the <b><a href="#Populate" style="font-weight: normal;">Populate Query Base</a></b> pipeline and it should only be manually triggered during the initial setup of LS Insight and if <span class="GeneralLSCentral_Mini">LS&#160;Central</span> is updated or extended.</p>
                                                <h5>Scheduled Run</h5>
                                                <p>Like the name suggests this is the pipeline that should be scheduled to run once every 24 hours.</p>
                                                <p>This pipeline executes all the other pipelines needed to load the LS&#160;Insight Data Warehouse.</p>
                                                <p>
                                                    <img src="../Resources/Images/LS Insight Help/ScheduledRun_800x322.png" class="images" style="width: 800;height: 322;" />
                                                </p>
                                                <p><b>Extract from Source</b> executes <b><a href="#All" style="font-weight: normal;">All staging Tables</a></b> pipeline.</p>
                                                <p><b>Clean dimensions and Load</b> executes <a href="#Execute">Execute Dimension Stored Procedures</a> pipeline.</p>
                                                <p><b>Outrigger Dimension Member Attribute</b> executes <a href="#PL-SP-od">PL-SP-odMemberAttributes</a> pipeline.</p>
                                                <p><b>Execute Item Cost Adjustment</b> executes <a href="#PL-SP-pr">PL-SP-prefactItemCostAdjustment</a> pipeline.</p>
                                                <p>Parallel to this we <b>Check if the Hotel Extension Exists</b>, and if that check is true the Hotel fact tables stored procedures can be run parallel to the other fact table procedures. The <b>If Condition 1</b> runs the two Hotel pipelines <a href="#PL-SP-Fa">PL-SP-factHotelDetailedRevenue</a> and <a href="#PL-SP-fa2">PL-SP-factHotelStatistic.</a></p>
                                                <p><b>Execute FactSalesPosted</b> executes <a href="#PL-SP-Fa">PL-SP-FactSalesPosted.</a></p>
                                                <p><b>Execute FactInventory</b>executes <a href="#PL-SP-fa4">PL-SP-factInventory.</a></p>
                                                <p><b>Execute FactDiscount</b> executes <a href="#PL-SP-fa3">PL-SP-factDiscount</a> and must be executed after FactSalesPosted because it uses information from FactSalesPosted.</p>
                                                <p><b>Execute UpdateAdjustedCost</b> executes <a href="#PL-SP-po">PL-SP-postfactUpdateAdjustedCost</a> and must be executed after FactSalesPosted because it updates that fact table with cost changes.</p>
                                            </div>
                                        </div>
                                        <h3>Datasets</h3>
                                        <p>There are three data sets in the <b>LS Insight Datasets</b> folder and they are used in different lookup activities in the pipelines.</p>
                                        <h5>LSCentralColumnMetadata</h5>
                                        <h5>LSInsightDW</h5>
                                        <h5>SourceDataset</h5>
                                        <h2><a name="Monitor"></a>Monitor</h2>
                                        <p>A special page is dedicated to <a href="Monitoring-Pipeline.htm">Monitoring pipelines</a> while they run. This goes both for scheduled pipelines and monitoring of manually triggered pipelines and pipeline chains.</p>
                                        <h2><a name="Manage"></a>Manage</h2>
                                        <p>The<b> Manage </b>section of the Azure Data Factory contains the Integration runtimes gateway and the Linked services. Both play a part in the connection from Azure to the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> source database and to the LS Insight DW.</p>
                                        <h3>Integration runtime gateway</h3>
                                        <p>The manual setup of the <b>LSInsight-IntegrationRuntime</b> gateway is explained in the <a href="Setup/LS-Central-On-Prem-LS-Insight-In-Azure/6-Azure-Setup.htm">LS Insight onboarding process</a>. It is only needed when <span class="GeneralLSCentral_Mini">LS&#160;Central</span> is on-premises, otherwise the <b>AutoResolvedIntegrationRuntime</b> is used. </p>
                                        <p><b>Tip:</b>&#160;Microsoft has some extensive documentation about the <a href="https://docs.microsoft.com/en-us/azure/data-factory/concepts-integration-runtime">integration runtime</a>.</p>
                                        <h3>Linked services</h3>
                                        <p>The LS Insight onboarding process creates the ADF with two linked services.</p>
                                        <h4><span class="GeneralLSCentral_Mini">LS&#160;Central</span> source</h4>
                                        <p>This linked service stores the connection to the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> source database and utilizes the <b>LSInsight-IntegrationRuntime</b> for that connection.</p>
                                        <h4>LSInsightDW</h4>
                                        <p>This linked service stores the connection to the LS Insight DW database.</p>
                                        <p>If the LS Insight database is located in Azure, it uses the <b>AutoResolvedIntegrationRuntime</b> to connect to the Azure SQL database, but if LS Insight is located on-premise within the same domain as the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> database, it can utilize the <b>LSInsight-IntegrationRuntime</b> that was created during the LS Insight setup.</p>
                                        <p>&#160;</p>
                                        <p>&#160;</p>
                                    </div>
                                    <div id="footer" class="ls-nav-footer">
                                        <hr width="100%" size="0" align="center" />
                                        <p>© <span class="VariablesCurrentYear">2021</span> LS Retail ehf. All rights reserved.  </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>