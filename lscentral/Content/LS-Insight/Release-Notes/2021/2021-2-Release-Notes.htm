<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Retail|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon-16x16.png" /><title>LS Insight 2021.2 Release Notes</title>
        <link rel="shortcut icon" href="/Content/Resources/Images/favicon.ico" />
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/LSNav.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" defer="defer">
        </script>
        <script src="../../../Resources/Javascripts/Scroll-Button.js" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-dropdown" style="display:none;" id="#centralSmallScreen"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../home.html" title="LS Central Help" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                    <div class="central-dropdown" style="display:none;" id="#centralTop"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="central-dropdown" style="display:none;"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <MadCap:conditionalText data-mc-conditions="Default.GoogleAnalytics">
                                        <script>/* <![CDATA[ */
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			
				ga('create', 'UA-58791693-4', 'auto');
			
				var file = document.location.href; 
				file = file.substring(0, (file.indexOf("#") == -1) ? file.length : file.indexOf("#"));
				file = file.substring(0, (file.indexOf("?") == -1) ? file.length : file.indexOf("?"));
				file = file.substring(file.lastIndexOf("/") + 1, file.length);
 
				if (file === 'Search.htm') 
				{
					var newPath = document.location.pathname + document.location.search + document.location.hash;
					newPath = newPath.replace(/#/, '?');
					newPath = newPath.replace(/search\-/, 'q=');
					ga('set', 'page', newPath);
				
					function locationHashChanged()
					{
						newPath = document.location.pathname + document.location.search + document.location.hash;
						newPath = newPath.replace(/#/, '?');
						newPath = newPath.replace(/search\-/, 'q=');
						ga('set', 'page', newPath);
						ga('send', 'pageview');
					}
				
					if(window.HashChangeEvent)
					{
						window.onhashchange = locationHashChanged;
					}
				}
				ga('send', 'pageview');
			/* ]]> */</script>
                                    </MadCap:conditionalText>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>&#160;</p>
                                    <div role="main" id="mc-main-content">
                                        <h1><a name="aanchor5596"></a>
                                            <MadCap:concept term="Release Notes" />LS Insight (2021.2) Release Notes</h1>
                                        <h2>About This Release</h2>
                                        <p><b id="releaseDate">Released -  April 29, 2021</b><![CDATA[  ]]></p>
                                        <p>This version of LS Insight supports versions 8.4 and later of <span class="GeneralLSCentral_Mini">LS&#160;Central</span> On-premises and later versions of <span class="GeneralLSCentral_Mini">LS&#160;Central</span> In-cloud (SaaS). Setup of LS Insight for <span class="GeneralLSCentral_Mini">LS&#160;Central</span> In-cloud (SaaS) needs some additional setup from the standard LS Insight onboarding process which is explained in detail in the <a href="../../Setup/Onboarding.htm">onboarding documentation</a>.</p>
                                        <p>In this version  support has been added for affixes to extension tables. All tables added to <span class="GeneralBC_Mini">Business Central</span> with <span class="GeneralLSCentral_Mini">LS&#160;Central</span> get the prefix LSC in version 17.5 of <span class="GeneralLSCentral_Mini">LS&#160;Central</span>. Because of these changes we will not be able to support LS Central SaaS version 17.5 until we have been able to test the replication against version 17.5 on SaaS. This should be available with our next version of LS Insight. </p>
                                        <p>A few issues, reported by customers and partners, have been fixed. These issues were caused by the&#160;dynamic staging table changes made in version 2021.1. One of the issues was duplicate lines in LS&#160;Insight fact tables, and by adding merging to all fact tables this issue has been fixed. There are jobs in <span class="GeneralLSCentral_Mini">LS&#160;Central</span> that round transactions cost values and those changes caused duplicate lines in LS&#160;Insight fact tables.</p>
                                        <p>A few improvements were also made to the Deployment script and they are explained in more details below.</p>
                                        <p><b>Note:</b> Updates for version 2021.1 are provided in a special update package. If you have already set up version 2021.1 you can update to 2021.2 without creating a new instance of LS Insight. See <a href="2021-2-Update-From-2021-1.htm">update guidelines</a> for more information. Please note that if you have customizations in your LS Insight instance, you need to make sure that the updates do not affect these customizations before you start.</p>
                                        <p>The following is a list of changes and key features in LS Insight version 2021.2.</p>
                                        <h2 class="RelNotesSection">New or Enhanced Features</h2>
                                        <h2 class="RelNotesProdGroup">Setup</h2>
                                        <h2 class="RelNotes-2">Onboarding </h2>
                                        <p>The deployment script has been improved to enhance the user experience and accuracy of parameter data. The onboarding documentation has been updated to reflect these updates.</p>
                                        <h3 class="RelNotes-2">Module loading</h3>
                                        <p>Now the scripts always load the latest LS Insight modules from the product folder the Deployment script is located in. This means that if the modules have previously been loaded from a different folder (to set up an earlier version of LS Insight), they will be removed and re-imported from the current folder.</p>
                                        <h3 class="RelNotes-2">Region selection </h3>
                                        <p>The Azure resource (SQL server, db and ADF) region selection now allows the user to decide whether he or she wants to use the same region as is set on the selected resource group, or whether he or she wants to select from the regions that support ADF v.2 and are allowed on his or her subscription.</p>
                                        <p>The lookup for allowed regions takes a few minutes, but it is worth the wait to only get the list of regions you can actually use for the setup.</p>
                                        <h3 class="RelNotes-2">New Azure SQL server password</h3>
                                        <p>A validation has been added to the password that is selected for the Admin user of a new SQL server. Previously, the only validation was of the Admin user name fulfilling the Azure requirements, but now the password is validated as well. Instructions about user name and password rules and restrictions is provided in the script and onboarding process documentation.</p>
                                        <h3 class="RelNotes-2">Power BI connection information</h3>
                                        <p>A printout has been containing the information needed to connect the Power BI report templates to the LS Insight database to the last step of the Deployment script. This allows the user to capture this information for later use without having to do a lookup in the Azure portal.</p>
                                        <h2 class="RelNotesProdGroup"><a name="DataWarehouse"></a>Data Warehouse</h2>
                                        <h2 class="RelNotes-2">Database</h2>
                                        <h3 class="RelNotes-2">Tables</h3>
                                        <p>Two meta data tables have been added to LS Insight because of the extension affix change in <span class="GeneralLSCentral_Mini">LS&#160;Central</span> 17.5.</p>
                                        <ul>
                                            <li value="1">LSInsight$ShortTableNameMap</li>
                                            <li value="2">LSInsight$PublisherAffixReg</li>
                                        </ul>
                                        <p>Both of those tables are used in the <i>PopulateQueryBase</i>  pipeline to trim away prefixes and suffixes and to create the staging table name that is the same as the table name from older versions. This is done so that we do not have to have multiple versions of each stored procedure used to load the dimensions and fact tables in the Data warehouse.</p>
                                        <h3 class="RelNotes-2">Stored procedures</h3>
                                        <p>To avoid duplicate entries in the LS Insight fact tables caused by updates in transaction tables, an update mechanism called merging in SQL&#160;has been added to all fact tables except two. </p>
                                        <p>This means that even if there are updates in values and timestamps and we have duplicate rows in the staging tables because of incremental load, we always use the latest version of the row and update the fact table accordingly.</p>
                                        <p>Merging has been added to the following stored procedures:</p>
                                        <ul>
                                            <li value="1">factSalesPosted</li>
                                            <li value="2">factInventory</li>
                                            <li value="3">factDiscount</li>
                                            <li value="4">factHotelDetailedRevenue</li>
                                        </ul>
                                        <p>Two fact tables are small and fully loaded every time the data warehouse is loaded with new data from <span class="GeneralLSCentral_Mini">LS&#160;Central</span>:</p>
                                        <ul>
                                            <li value="1">factHotelStatistics</li>
                                            <li value="2">prefactItemCostAdjustment</li>
                                        </ul>
                                        <h2 class="RelNotes-2">Pipelines</h2>
                                        <h3 class="RelNotes-2">PopulateQueryBase fixes</h3>
                                        <p>Modifications have been made to the script that is run in the <b style="font-style: italic; font-weight: normal;">GetMetadata if True</b> activity in the <i>Generate LS&#160;Insight Query Base</i> pipeline in the Azure Data Factory. The <i>GETCentralColumnMetadata</i> activity Source script has been modified. </p>
                                        <p>The script now:</p>
                                        <ul>
                                            <li value="1">Checks explicitly for the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> app guide in the <i>NAV installed app</i> table to decide which version of <span class="GeneralLSCentral_Mini">LS&#160;Central</span> is being queried. </li>
                                            <li value="2">Supports affixes to extension tables. The affix mapping is done through two new tables;   LSInsight$PublisherAffixReg and the LSInsight$ShortTableNameMap. These tables have been populated with the correct data for use with <span class="GeneralLSCentral_Mini">LS&#160;Central</span> 17.5 and later.</li>
                                            <li value="3">Uses&#160;LEFT JOIN instead of JOIN when joining together columns and tables in older versions as was already the procedure for newer versions. This greatly reduces the time the script takes to run when <span class="GeneralLSCentral_Mini">LS&#160;Central</span> has multiple companies.</li>
                                            <li value="4">Filters the tables more precisely to only query relevant tables from <span class="GeneralLSCentral_Mini">LS&#160;Central</span>.</li>
                                        </ul>
                                        <h3 class="RelNotes-2">New pipelines</h3>
                                        <p>Two new pipelines have been added to LS Insight. They are only needed for new instances of LS Insight with <span class="GeneralLSCentral_Mini">LS&#160;Central</span> version 17.5 and later.</p>
                                        <p> <b>1- LS Insight query setup</b></p>
                                        <ul>
                                            <li value="1">Add or Delete App Affix</li>
                                            <li value="2">Add or Delete ShortTableNameMapping</li>
                                        </ul>
                                        <p>These pipelines are used to add and delete from the Affix meta data tables that have been added to the DW. These pipelines should only be used when extending and customizing the Data Warehouse. The LS&#160;Insight DW template database already contains the mappings and LS Retail prefixes need for standard LS Insight.</p>
                                        <h2 class="RelNotesProdGroup">Reports</h2>
                                        <h2 class="RelNotes-2"><a name="LS"></a>LS Insight Sales</h2>
                                        <p>Two discount calculations were fixed in the Sales report:</p>
                                        <ul>
                                            <li value="1">Standard Price on discount changed<ul style="list-style-type: circle;"><li value="1"><b>From:</b> Standard Price On Discount Transactions = Sum('Actuals Discounts'[SalesAmountFromActualSales]) + [Total Discount]</li><li value="2"><b>To:</b>Standard Price On Discount Transactions = sumx('Actuals Discounts',[SalesAmount] + [Total Discount] )</li></ul></li>
                                            <li value="2">Margins From Discount Sales:<ul style="list-style-type: circle;"><li value="1"><b>From:</b> Margin From Discount Sales = [Standard Price On Discount Transactions] - [Total Discount] - Sum('Actuals Discounts'[CostFromActualSales])</li><li value="2"><b>To:</b>Margin From Discount Sales = [Standard Price On Discount Transactions] - [Total Discount] - [Cost Amount]</li></ul></li>
                                        </ul>
                                        <p>One discount calculation was added:</p>
                                        <ul>
                                            <li value="1">Cost Amount = Sumx('Actuals Discounts','Actuals Discounts'[CostAmount])</li>
                                        </ul>
                                        <h2 class="RelNotes-2">LS Insight Inventory</h2>
                                        <p>No changes.</p>
                                        <h2 class="RelNotes-2">LS Insight Hotels</h2>
                                        <p>No changes.</p>
                                        <p>&#160;</p>
                                        <p>&#160;</p>
                                    </div>
                                    <div id="footer" class="ls-nav-footer">
                                        <hr width="100%" size="0" align="center" />
                                        <p>© <span class="VariablesCurrentYear">2021</span> LS Retail ehf. All rights reserved.  </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>