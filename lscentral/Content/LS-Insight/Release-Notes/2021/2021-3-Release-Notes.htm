<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Retail|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon-16x16.png" /><title>LS Insight 2021.2 Release Notes</title>
        <link rel="shortcut icon" href="/Content/Resources/Images/favicon.ico" />
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/LSNav.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js" defer="defer">
        </script>
        <script src="../../../Resources/Javascripts/Scroll-Button.js" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-dropdown" style="display:none;" id="#centralSmallScreen"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../home.html" title="LS Central Help" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                    <div class="central-dropdown" style="display:none;" id="#centralTop"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="central-dropdown" style="display:none;"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <MadCap:conditionalText data-mc-conditions="Default.GoogleAnalytics">
                                        <script>/* <![CDATA[ */
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			
				ga('create', 'UA-58791693-4', 'auto');
			
				var file = document.location.href; 
				file = file.substring(0, (file.indexOf("#") == -1) ? file.length : file.indexOf("#"));
				file = file.substring(0, (file.indexOf("?") == -1) ? file.length : file.indexOf("?"));
				file = file.substring(file.lastIndexOf("/") + 1, file.length);
 
				if (file === 'Search.htm') 
				{
					var newPath = document.location.pathname + document.location.search + document.location.hash;
					newPath = newPath.replace(/#/, '?');
					newPath = newPath.replace(/search\-/, 'q=');
					ga('set', 'page', newPath);
				
					function locationHashChanged()
					{
						newPath = document.location.pathname + document.location.search + document.location.hash;
						newPath = newPath.replace(/#/, '?');
						newPath = newPath.replace(/search\-/, 'q=');
						ga('set', 'page', newPath);
						ga('send', 'pageview');
					}
				
					if(window.HashChangeEvent)
					{
						window.onhashchange = locationHashChanged;
					}
				}
				ga('send', 'pageview');
			/* ]]> */</script>
                                    </MadCap:conditionalText>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                        </div>
                                    </div>
                                    <p>&#160;</p>
                                    <div role="main" id="mc-main-content">
                                        <h1><a name="aanchor1273"></a>
                                            <MadCap:concept term="Release Notes" />LS Insight (2021.3) Release Notes</h1>
                                        <h2>About This Release</h2>
                                        <p><b id="releaseDate">Released -  August 30, 2021</b><![CDATA[  ]]></p>
                                        <p>This version of LS Insight supports versions 8.4 and later of <span class="GeneralLSCentral_Mini">LS&#160;Central</span> On-premises and later versions of <span class="GeneralLSCentral_Mini">LS&#160;Central</span> In-cloud (SaaS). Setup of LS Insight for <span class="GeneralLSCentral_Mini">LS&#160;Central</span> In-cloud (SaaS) needs some additional setup from the standard LS Insight onboarding process which is explained in detail in the <a href="../../Setup/Onboarding.htm">onboarding documentation</a>.</p>
                                        <p>In the last released version we added support for affixes to extension tables. We have now tested the replication against version 17.5 and later on SaaS and LS Insight is available for those versions but not older versions of LS Central SaaS.</p>
                                        <p>A few issues, reported by customers and partners, have been fixed. </p>
                                        <p><b>Note:</b> Updates for version 2021.2 are provided in a special update package. If you have already set up version 2021.2, you can update to 2021.3 without creating a new instance of LS Insight. See <a href="2021-3-Update-From-2021-2.htm">update guidelines</a> for more information. Please note that if you have customizations in your LS Insight instance, you need to make sure that the updates do not affect these customizations before you start. If you are running LS&#160;Insight against <span class="GeneralLSCentral_Mini">LS&#160;Central</span> in SaaS, you will not be able to update LS Insight but need to set up a new instance of LS Insight.</p>
                                        <p>The following is a list of changes and key features in LS Insight version 2021.3.</p>
                                        <h2 class="RelNotesSection">New or Enhanced Features</h2>
                                        <h2 class="RelNotesProdGroup">Setup</h2>
                                        <h2 class="RelNotes-2">Onboarding </h2>
                                        <p>Script that creates pre-staging tables for LS Insight for <span class="GeneralLSCentral_Mini">LS&#160;Central</span> Saas now creates tables that reflect the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> table structure in version 17.5 and later.</p>
                                        <p>This means that all <span class="GeneralLSCentral_Mini">LS&#160;Central</span> specific tables now have the LSC prefix and all extension table columns have also been prefixed with LSC. For you to be able to replicate between <span class="GeneralLSCentral_Mini">LS&#160;Central</span> SaaS 17.5 and later, you must set up this latest version of LS Insight so you have the correctly prefixed pre-staging tables and columns.</p>
                                        <h2 class="RelNotesProdGroup"><a name="DataWarehouse"></a>Data Warehouse</h2>
                                        <h2 class="RelNotes-2">Database</h2>
                                        <h3 class="RelNotes-2">Tables</h3>
                                        <p>Description field column length in dItemVariant table was changed from nvarchar(50) to nvarchar(100).</p>
                                        <h3 class="RelNotes-2">Stored procedures</h3>
                                        <p>Fixed the "finishing date time" registration in LSInsight$Audit table. To fix this we changed the Batchdate from GETUTCDATE() to GETDATE() in the UpdateLSInsightAudit stored procedure.</p>
                                        <p>Fixed that incorrect fiscal year start month was added to company table by adding the AND clause, "AND sACP.[New Fiscal Year] = 1", to predimMergedCompany stored procedure.</p>
                                        <p>Fixed issue that not all lines were moved from Item ledger entry staging table to fInventory table. This required and update in the factInventory stored procedure and in the Inventory Power BI template. The script to update the stored procedure is a part of the update package.</p>
                                        <h2 class="RelNotes-2">Pipelines</h2>
                                        <h3 class="RelNotes-2">PopulateQueryBase fix</h3>
                                        <p>To prevent duplicate rows in QUERYBASE, the PopulateQueryBase &gt; Tablelists subquery was modified. CountRows was removed from group by and selected as max(CountRows).</p>
                                        <h3 class="RelNotes-2">Staging query fix</h3>
                                        <p>WITH (NOLOCK) added to all staging select queries. This means that the staging queries no longer lock the <span class="GeneralLSCentral_Mini">LS&#160;Central</span> tables while getting data.</p>
                                        <h2 class="RelNotesProdGroup">Reports</h2>
                                        <h2 class="RelNotes-2"><a name="LS"></a>LS Insight Sales</h2>
                                        <p>No changes.</p>
                                        <h2 class="RelNotes-2">LS Insight Inventory</h2>
                                        <p>Because of the change in the factInventory stored procedure, we needed to make a change in the Inventory Power BI template. If you have an existing power BI report that you have customized for inventory but you want to make use of this fix, you can run the <b>Modify_factInventory.sql</b> script from the update package on the LS Insight database, and then manually update the dax calculations in your LS Insight Inventory report by following the instructions below.</p>
                                        <h3 class="RelNotes-2">Manual calculation update</h3>
                                        <ol>
                                            <li value="1">Open <b>LS Insight Inventory.pbix</b> report in Power BI desktop.</li>
                                            <li value="2">Right-click below the fields list in the right-side pane, and select <b>View hidden</b>.<p><img src="../../../Resources/Images/LS Insight Help/viewhidden_250x475.png" class="images" style="width: 250;height: 475;" /></p></li>
                                            <li value="3">In the fields search box, type <b>OYInventory</b> and edit the top 3 calculations with the formulas below: <p><img src="../../../Resources/Images/LS Insight Help/calculations_250x112.png" class="images" style="width: 250;height: 112;" /></p><pre><b>OYInventory</b> = 
/*
Showing the end of year inventory on hand
*/
	CALCULATE(
		[YearInventoryMovement]
		,Filter(
				ALL(EOYinventory[PostedDate]),
				EOYinventory[PostedDate] &lt; MAX('Date'[Date])
		)
	)</pre><pre xml:space="preserve"><b>OYInventoryCost</b> = 
/*
Showing the end of year inventory cost 
*/
	CALCULATE(
		[YearInventoryCost]
		,Filter(
			ALL(EOYinventory[PostedDate]),
			EOYinventory[PostedDate] &lt; MAX('Date'[Date])
		)
	)</pre><pre><b>OYInventoryValue</b> = 
/*
Showing the end of year inventory value 
*/
	CALCULATE(
		[YearInventoryValue]
		,Filter(
			ALL(EOYinventory[PostedDate]),
			EOYinventory[PostedDate] &lt; MAX('Date'[Date])
		)
	)</pre></li>
                                            <li value="4">Publish the report to Power BI service.</li>
                                        </ol>
                                        <h2 class="RelNotes-2">LS Insight Hotels</h2>
                                        <p>No changes.</p>
                                        <p>&#160;</p>
                                        <p>&#160;</p>
                                    </div>
                                    <div id="footer" class="ls-nav-footer">
                                        <hr width="100%" size="0" align="center" />
                                        <p>© <span class="VariablesCurrentYear">2021</span> LS Retail ehf. All rights reserved.  </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>